(function(global){"use strict";var Logger={};Logger.VERSION="1.2.0";var logHandler;var contextualLoggersByNameMap={};var bind=function(scope,func){return function(){return func.apply(scope,arguments)}};var merge=function(){var args=arguments,target=args[0],key,i;for(i=1;i<args.length;i++){for(key in args[i]){if(!(key in target)&&args[i].hasOwnProperty(key)){target[key]=args[i][key]}}}return target};var defineLogLevel=function(value,name){return{value:value,name:name}};Logger.DEBUG=defineLogLevel(1,"DEBUG");Logger.INFO=defineLogLevel(2,"INFO");Logger.TIME=defineLogLevel(3,"TIME");Logger.WARN=defineLogLevel(4,"WARN");Logger.ERROR=defineLogLevel(8,"ERROR");Logger.OFF=defineLogLevel(99,"OFF");var ContextualLogger=function(defaultContext){this.context=defaultContext;this.setLevel(defaultContext.filterLevel);this.log=this.info};ContextualLogger.prototype={setLevel:function(newLevel){if(newLevel&&"value"in newLevel){this.context.filterLevel=newLevel}},enabledFor:function(lvl){var filterLevel=this.context.filterLevel;return lvl.value>=filterLevel.value},debug:function(){this.invoke(Logger.DEBUG,arguments)},info:function(){this.invoke(Logger.INFO,arguments)},warn:function(){this.invoke(Logger.WARN,arguments)},error:function(){this.invoke(Logger.ERROR,arguments)},time:function(label){if(typeof label==="string"&&label.length>0){this.invoke(Logger.TIME,[label,"start"])}},timeEnd:function(label){if(typeof label==="string"&&label.length>0){this.invoke(Logger.TIME,[label,"end"])}},invoke:function(level,msgArgs){if(logHandler&&this.enabledFor(level)){logHandler(msgArgs,merge({level:level},this.context))}}};var globalLogger=new ContextualLogger({filterLevel:Logger.OFF});(function(){var L=Logger;L.enabledFor=bind(globalLogger,globalLogger.enabledFor);L.debug=bind(globalLogger,globalLogger.debug);L.time=bind(globalLogger,globalLogger.time);L.timeEnd=bind(globalLogger,globalLogger.timeEnd);L.info=bind(globalLogger,globalLogger.info);L.warn=bind(globalLogger,globalLogger.warn);L.error=bind(globalLogger,globalLogger.error);L.log=L.info})();Logger.setHandler=function(func){logHandler=func};Logger.setLevel=function(level){globalLogger.setLevel(level);for(var key in contextualLoggersByNameMap){if(contextualLoggersByNameMap.hasOwnProperty(key)){contextualLoggersByNameMap[key].setLevel(level)}}};Logger.get=function(name){return contextualLoggersByNameMap[name]||(contextualLoggersByNameMap[name]=new ContextualLogger(merge({name:name},globalLogger.context)))};Logger.useDefaults=function(options){options=options||{};options.formatter=options.formatter||function defaultMessageFormatter(messages,context){if(context.name){messages.unshift("["+context.name+"]")}};if(typeof console==="undefined"){return}var timerStartTimeByLabelMap={};var invokeConsoleMethod=function(hdlr,messages){Function.prototype.apply.call(hdlr,console,messages)};Logger.setLevel(options.defaultLevel||Logger.DEBUG);Logger.setHandler(function(messages,context){messages=Array.prototype.slice.call(messages);var hdlr=console.log;var timerLabel;if(context.level===Logger.TIME){timerLabel=(context.name?"["+context.name+"] ":"")+messages[0];if(messages[1]==="start"){if(console.time){console.time(timerLabel)}else{timerStartTimeByLabelMap[timerLabel]=(new Date).getTime()}}else{if(console.timeEnd){console.timeEnd(timerLabel)}else{invokeConsoleMethod(hdlr,[timerLabel+": "+((new Date).getTime()-timerStartTimeByLabelMap[timerLabel])+"ms"])}}}else{if(context.level===Logger.WARN&&console.warn){hdlr=console.warn}else if(context.level===Logger.ERROR&&console.error){hdlr=console.error}else if(context.level===Logger.INFO&&console.info){hdlr=console.info}options.formatter(messages,context);invokeConsoleMethod(hdlr,messages)}})};if(typeof define==="function"&&define.amd){define(Logger)}else if(typeof module!=="undefined"&&module.exports){module.exports=Logger}else{Logger._prevLogger=global.Logger;Logger.noConflict=function(){global.Logger=Logger._prevLogger;return Logger};global.Logger=Logger}})(this);
//# sourceMappingURL=/js/lib/logger-1.2.0.min.map
